<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cuentos Invertidos</title>
<link rel="stylesheet" href="style.css">
<style>
  body {
    font-family: "Comic Sans MS", sans-serif;
    background-color: #fff8e7;
    margin: 0;
    padding: 0;
    text-align: center;
    color: #333;
  }

  header {
    background-color: #ff9e80;
    padding: 20px;
    color: white;
    font-size: 1.8em;
    font-weight: bold;
    border-bottom: 5px solid #ff7c58;
  }

  main {
    padding: 20px;
  }

  button {
    background-color: #ff9e80;
    border: none;
    color: white;
    padding: 10px 20px;
    margin: 15px 0;
    border-radius: 12px;
    font-size: 1em;
    cursor: pointer;
    transition: background 0.3s;
  }

  button:hover {
    background-color: #ff7c58;
  }

  textarea {
    width: 90%;
    max-width: 500px;
    height: 150px;
    border-radius: 15px;
    border: 2px solid #ffb399;
    padding: 10px;
    font-size: 1em;
    margin-top: 15px;
  }

  footer {
    background-color: #fff3e0;
    padding: 15px;
    font-size: 0.9em;
    color: #555;
  }

  select {
    margin-top: 10px;
    padding: 8px;
    border-radius: 10px;
    border: 2px solid #ffc2a3;
    font-size: 1em;
  }
</style>
</head>
<body>

<header>游꿚 Cuentos Invertidos</header>

<main>
  <h2>Escucha el cuento y usa tu imaginaci칩n</h2>
  <p>Presiona "游댉 Escuchar cuento" para o칤r el cuento distorsionado. Luego dibuja o escribe lo que crees que sucede.</p>

  <label for="vozSelect">游꿗 Elige una voz:</label>
  <select id="vozSelect"></select>

  <button onclick="escucharCuento()">游댉 Escuchar cuento</button>
  <audio id="vozDistorsionada" src="Un ni침o se puso tris.mp3"></audio>

  <h3>九勇 Dibuja o escribe tu historia</h3>
  <p>En tu libro: dibuja lo que imaginas antes de ver la versi칩n real.</p>
  <textarea placeholder="Escribe aqu칤 lo que imaginas..."></textarea>

  <h3>游닀 Comparar con la versi칩n real</h3>
  <button onclick="leerCuentoReal()">游닀 Escuchar cuento real</button>
  <audio id="vozReal" src="_Hab칤a una vez un so.mp3"></audio>
</main>

<footer>游눛 Proyecto educativo para ni침os con TEA | 2025</footer>

<script>
let voces = [];

// Cargar voces disponibles
function cargarVoces() {
  voces = speechSynthesis.getVoices();
  const select = document.getElementById("vozSelect");
  select.innerHTML = "";

  voces
    .filter(v => v.lang.startsWith("es"))
    .forEach(voz => {
      const option = document.createElement("option");
      option.value = voz.name;
      option.textContent = `${voz.name} (${voz.lang})`;
      select.appendChild(option);
    });
}

// Asegurar que se carguen las voces
window.speechSynthesis.onvoiceschanged = cargarVoces;

// Leer texto con voz seleccionada
function leerTexto(texto) {
  const mensaje = new SpeechSynthesisUtterance(texto);
  const vozSeleccionada = document.getElementById("vozSelect").value;
  const voz = voces.find(v => v.name === vozSeleccionada);
  if (voz) mensaje.voice = voz;
  mensaje.lang = 'es-ES';
  mensaje.rate = 1;      // Velocidad normal
  mensaje.pitch = 1.4;   // Tono un poco m치s agudo (m치s infantil)
  window.speechSynthesis.speak(mensaje);
}

// Cuento distorsionado
function escucharCuento() {
  const audio = document.getElementById("vozDistorsionada");

  if (audio && audio.readyState > 0) {
    audio.play(); // Usa el audio si existe
  } else {
    const cuentoInvertido = "춰zaM aL s칄cibmuC y aL onicnuL se odnI! ... era un cuento lleno de risas al rev칠s y palabras m치gicas que bailaban.";
    leerTexto(cuentoInvertido);
  }
}

// Cuento real
function leerCuentoReal() {
  const audio = document.getElementById("vozReal");

  if (audio && audio.readyState > 0) {
    audio.play(); // Usa el audio si existe
  } else {
    const cuentoReal = "Hab칤a una vez un sol brillante y una nube juguetona. Discut칤an qui칠n pod칤a hacer sonre칤r a un ni침o. La nube lo cubri칩 y el ni침o se puso triste. Luego, el sol brill칩 y el ni침o sonri칩. Ambos aprendieron que juntos pod칤an crear d칤as perfectos.";
    leerTexto(cuentoReal);
  }
}
</script>

</body>
</html>

